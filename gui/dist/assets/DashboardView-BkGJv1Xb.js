import{d as $,r as M,c as Q,o as j,a as T,b as o,e as t,t as l,n as V,f as N,g as c,w as m,h as F,F as L,i as R,u as H,j as d}from"./index-CGTMR5kG.js";import{u as I}from"./servers-Dx8MWeGI.js";import{u as U}from"./query-AoeqUmWN.js";const E={class:"space-y-6"},G={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 sm:gap-6"},A={class:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800/50 rounded-lg p-6"},q={class:"text-2xl font-semibold text-neutral-900 dark:text-white mt-1"},J={class:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800/50 rounded-lg p-6"},K={class:"text-2xl font-semibold text-neutral-900 dark:text-white mt-1"},O={class:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800/50 rounded-lg p-6"},P={class:"text-2xl font-semibold text-neutral-900 dark:text-white mt-1"},W={class:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800/50 rounded-lg p-6"},X={class:"text-2xl font-semibold text-neutral-900 dark:text-white mt-1"},Y={class:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800/50 rounded-lg p-6"},Z={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-4"},tt={class:"bg-neutral-50 dark:bg-neutral-800/50 rounded-lg p-4"},et={class:"flex items-center gap-2"},rt={class:"text-lg font-semibold text-neutral-900 dark:text-white capitalize"},st={class:"bg-neutral-50 dark:bg-neutral-800/50 rounded-lg p-4"},at={class:"text-lg font-semibold text-neutral-900 dark:text-white"},lt={class:"w-full bg-neutral-200 dark:bg-neutral-700 rounded-full h-2 mt-2"},nt={class:"bg-neutral-50 dark:bg-neutral-800/50 rounded-lg p-4"},ot={class:"text-lg font-semibold text-neutral-900 dark:text-white"},dt={key:1,class:"text-neutral-500 dark:text-neutral-400 text-center py-8"},ut={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},it={class:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800/50 rounded-lg p-6"},xt={class:"space-y-2"},gt={class:"bg-white dark:bg-neutral-900 border border-neutral-200 dark:border-neutral-800/50 rounded-lg p-6"},ct={key:0,class:"space-y-2"},mt=["onClick"],bt={class:"font-mono text-sm text-neutral-900 dark:text-white truncate"},ht={class:"flex items-center gap-3 mt-1 text-xs text-neutral-500 dark:text-neutral-400"},vt={key:1,class:"text-neutral-500 dark:text-neutral-400 text-center py-4"},yt=$({__name:"DashboardView",setup(kt){const C=H(),B=I(),b=U(),i=M(null),n=M(null);let g=null;const h=Q(()=>b.recentQueries);async function v(){const r=B.activeClient;if(r)try{const[e,s]=await Promise.all([r.getStats(),r.healthCheck()]);e.success&&e.data&&(i.value=e.data),s.success&&s.data&&(n.value=s.data)}catch(e){console.error("Failed to load dashboard data:",e)}}function S(r){b.setQuery(r),C.push("/query")}function k(r){if(r===0)return"0 B";const e=1024,s=["B","KB","MB","GB","TB"],a=Math.floor(Math.log(r)/Math.log(e));return parseFloat((r/Math.pow(e,a)).toFixed(2))+" "+s[a]}function z(r){const e=Math.floor(r/86400),s=Math.floor(r%86400/3600),a=Math.floor(r%3600/60);return e>0?`${e}d ${s}h`:s>0?`${s}h ${a}m`:`${a}m`}function D(r){const s=new Date().getTime()-new Date(r).getTime(),a=Math.floor(s/6e4),x=Math.floor(s/36e5);return a<1?"Just now":a<60?`${a}m ago`:x<24?`${x}h ago`:new Date(r).toLocaleDateString()}return j(()=>{v(),g=setInterval(v,3e4)}),T(()=>{g&&clearInterval(g)}),(r,e)=>{var a,x,p,f,w,_,y;const s=F("router-link");return d(),o("div",E,[e[19]||(e[19]=t("div",null,[t("h1",{class:"text-xl sm:text-2xl font-bold text-neutral-900 dark:text-white"},"Dashboard"),t("p",{class:"text-sm sm:text-base text-neutral-600 dark:text-neutral-400 mt-1"},"Welcome to Nexus Graph Database")],-1)),t("div",G,[t("div",A,[e[0]||(e[0]=t("div",{class:"text-sm font-medium text-neutral-500 dark:text-neutral-400"},"Nodes",-1)),t("div",q,l(((a=i.value)==null?void 0:a.nodeCount)||0),1),e[1]||(e[1]=t("div",{class:"text-xs text-neutral-500 dark:text-neutral-400 mt-1"},"Total nodes in database",-1))]),t("div",J,[e[2]||(e[2]=t("div",{class:"text-sm font-medium text-neutral-500 dark:text-neutral-400"},"Relationships",-1)),t("div",K,l(((x=i.value)==null?void 0:x.relationshipCount)||0),1),e[3]||(e[3]=t("div",{class:"text-xs text-neutral-500 dark:text-neutral-400 mt-1"},"Total relationships",-1))]),t("div",O,[e[4]||(e[4]=t("div",{class:"text-sm font-medium text-neutral-500 dark:text-neutral-400"},"Labels",-1)),t("div",P,l(((p=i.value)==null?void 0:p.labelCount)||0),1),e[5]||(e[5]=t("div",{class:"text-xs text-neutral-500 dark:text-neutral-400 mt-1"},"Node labels",-1))]),t("div",W,[e[6]||(e[6]=t("div",{class:"text-sm font-medium text-neutral-500 dark:text-neutral-400"},"Indexes",-1)),t("div",X,l(((f=i.value)==null?void 0:f.indexCount)||0),1),e[7]||(e[7]=t("div",{class:"text-xs text-neutral-500 dark:text-neutral-400 mt-1"},"Active indexes",-1))])]),t("div",Y,[e[12]||(e[12]=t("h2",{class:"text-lg font-semibold text-neutral-900 dark:text-white mb-4"},"Server Health",-1)),n.value?(d(),o("div",Z,[t("div",tt,[e[8]||(e[8]=t("div",{class:"text-sm text-neutral-500 dark:text-neutral-400 mb-1"},"Status",-1)),t("div",et,[t("span",{class:V(["w-3 h-3 rounded-full",n.value.status==="healthy"?"bg-green-500":"bg-red-500"])},null,2),t("span",rt,l(n.value.status),1)])]),t("div",st,[e[9]||(e[9]=t("div",{class:"text-sm text-neutral-500 dark:text-neutral-400 mb-1"},"Memory Usage",-1)),t("div",at,l(k(((w=n.value.memory)==null?void 0:w.used)||0))+" / "+l(k(((_=n.value.memory)==null?void 0:_.total)||0)),1),t("div",lt,[t("div",{class:"bg-neutral-600 dark:bg-neutral-400 h-2 rounded-full transition-all",style:N({width:`${((y=n.value.memory)==null?void 0:y.percentage)||0}%`})},null,4)])]),t("div",nt,[e[10]||(e[10]=t("div",{class:"text-sm text-neutral-500 dark:text-neutral-400 mb-1"},"Uptime",-1)),t("div",ot,l(z(n.value.uptime||0)),1)])])):(d(),o("div",dt,[...e[11]||(e[11]=[t("p",null,"Loading server health...",-1)])]))]),t("div",ut,[t("div",it,[e[16]||(e[16]=t("h2",{class:"text-lg font-semibold text-neutral-900 dark:text-white mb-4"},"Quick Actions",-1)),t("div",xt,[c(s,{to:"/query",class:"flex items-center gap-3 p-3 bg-neutral-50 dark:bg-neutral-800/50 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors"},{default:m(()=>[...e[13]||(e[13]=[t("div",{class:"w-8 h-8 bg-neutral-200 dark:bg-neutral-700 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-4 h-4 text-neutral-600 dark:text-neutral-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 9l3 3-3 3m5 0h3M5 20h14a2 2 0 002-2V6a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})])],-1),t("span",{class:"text-neutral-900 dark:text-white"},"Open Query Editor",-1)])]),_:1}),c(s,{to:"/graph",class:"flex items-center gap-3 p-3 bg-neutral-50 dark:bg-neutral-800/50 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors"},{default:m(()=>[...e[14]||(e[14]=[t("div",{class:"w-8 h-8 bg-neutral-200 dark:bg-neutral-700 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-4 h-4 text-neutral-600 dark:text-neutral-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})])],-1),t("span",{class:"text-neutral-900 dark:text-white"},"Explore Graph",-1)])]),_:1}),c(s,{to:"/schema",class:"flex items-center gap-3 p-3 bg-neutral-50 dark:bg-neutral-800/50 rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors"},{default:m(()=>[...e[15]||(e[15]=[t("div",{class:"w-8 h-8 bg-neutral-200 dark:bg-neutral-700 rounded-lg flex items-center justify-center"},[t("svg",{class:"w-4 h-4 text-neutral-600 dark:text-neutral-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"})])],-1),t("span",{class:"text-neutral-900 dark:text-white"},"View Schema",-1)])]),_:1})])]),t("div",gt,[e[18]||(e[18]=t("h2",{class:"text-lg font-semibold text-neutral-900 dark:text-white mb-4"},"Recent Queries",-1)),h.value.length>0?(d(),o("div",ct,[(d(!0),o(L,null,R(h.value.slice(0,5),u=>(d(),o("div",{key:u.id,class:"p-3 bg-neutral-50 dark:bg-neutral-800/50 rounded-lg cursor-pointer hover:bg-neutral-100 dark:hover:bg-neutral-800 transition-colors",onClick:pt=>S(u.query)},[t("div",bt,l(u.query),1),t("div",ht,[t("span",null,l(D(u.timestamp)),1),t("span",null,l(u.rowCount)+" rows",1),t("span",null,l(u.executionTime)+"ms",1)])],8,mt))),128))])):(d(),o("div",vt,[...e[17]||(e[17]=[t("p",null,"No recent queries",-1)])]))])])])}}});export{yt as default};
