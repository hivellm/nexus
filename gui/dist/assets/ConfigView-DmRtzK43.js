import{z as F,r as C,d as A,u as U,A as L,f as _,c as g,b as N,q as E,a as e,t as c,w as x,v as V,C as M,n as S,k as y,o as p,m as O,e as H,E as z,y as w,F as G,j as Q,B as J}from"./index-BNyczF3N.js";const I="nexus-desktop-theme",Y=F("theme",()=>{const d=C("dark");function b(){const s=localStorage.getItem(I);if(s&&(s==="dark"||s==="light"))d.value=s;else{const f=window.matchMedia("(prefers-color-scheme: dark)").matches;d.value=f?"dark":"light"}v()}function m(s){d.value=s,localStorage.setItem(I,s),v()}function h(){m(d.value==="dark"?"light":"dark")}function v(){d.value==="dark"?document.documentElement.classList.add("dark-mode"):document.documentElement.classList.remove("dark-mode"),document.documentElement.setAttribute("data-theme",d.value)}return typeof window<"u"&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",s=>{localStorage.getItem(I)||(d.value=s.matches?"dark":"light",v())}),{theme:d,loadTheme:b,setTheme:m,toggleTheme:h}}),K={class:"bg-bg-elevated rounded-xl p-6 w-full max-w-md border border-border shadow-xl"},W={class:"flex items-center justify-between mb-6"},X={class:"text-lg font-semibold text-text-primary"},Z={class:"flex items-center gap-2"},ee={class:"flex items-center gap-2"},te={class:"flex items-center gap-2 pt-2"},se=["disabled"],oe=["disabled"],ne=A({__name:"ServerConnectionModal",props:{isOpen:{type:Boolean},serverId:{}},emits:["close","saved"],setup(d,{emit:b}){const m=d,h=b,v=U(),s=L({name:"",host:"localhost",port:7687,ssl:!1}),f=C(!1),k=C(!1),i=C(null);_(()=>{var u;if(m.serverId){const o=v.getServer(m.serverId);o&&(s.name=o.name,s.host=o.host||((u=o.url)==null?void 0:u.replace(/^https?:\/\//,"").split(":")[0])||"localhost",s.port=o.port||15474,s.ssl=o.ssl||!1)}});async function l(){var u;f.value=!0,i.value=null;try{const r=await v.createClient({id:"test",name:s.name,host:s.host,port:s.port,ssl:s.ssl,connected:!1,status:"disconnected"}).healthCheck();r.success?i.value={success:!0,message:`Connected! Server is ${((u=r.data)==null?void 0:u.status)||"healthy"}`}:i.value={success:!1,message:r.error||"Connection failed"}}catch(o){i.value={success:!1,message:o.message||"Connection failed"}}finally{f.value=!1}}async function T(){k.value=!0;try{m.serverId?v.updateServer(m.serverId,{name:s.name,host:s.host,port:s.port,ssl:s.ssl}):v.addServer({name:s.name,host:s.host,port:s.port,ssl:s.ssl}),h("saved"),h("close")}catch(u){i.value={success:!1,message:u.message||"Failed to save connection"}}finally{k.value=!1}}return(u,o)=>d.isOpen?(p(),g("div",{key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:o[5]||(o[5]=E(r=>u.$emit("close"),["self"]))},[e("div",K,[e("div",W,[e("h3",X,c(d.serverId?"Edit Connection":"New Connection"),1),e("button",{onClick:o[0]||(o[0]=r=>u.$emit("close")),class:"p-2 text-text-muted hover:text-text-primary hover:bg-bg-hover rounded transition-colors"},[...o[6]||(o[6]=[e("i",{class:"fas fa-times"},null,-1)])])]),e("form",{onSubmit:E(T,["prevent"]),class:"space-y-4"},[e("div",null,[o[7]||(o[7]=e("label",{class:"block text-sm text-text-secondary mb-1"},"Connection Name",-1)),x(e("input",{"onUpdate:modelValue":o[1]||(o[1]=r=>s.name=r),type:"text",class:"input",placeholder:"My Nexus Server",required:""},null,512),[[V,s.name]])]),e("div",null,[o[8]||(o[8]=e("label",{class:"block text-sm text-text-secondary mb-1"},"Host",-1)),x(e("input",{"onUpdate:modelValue":o[2]||(o[2]=r=>s.host=r),type:"text",class:"input",placeholder:"localhost",required:""},null,512),[[V,s.host]])]),e("div",null,[o[9]||(o[9]=e("label",{class:"block text-sm text-text-secondary mb-1"},"Port",-1)),x(e("input",{"onUpdate:modelValue":o[3]||(o[3]=r=>s.port=r),type:"number",class:"input",placeholder:"7687",required:""},null,512),[[V,s.port,void 0,{number:!0}]])]),e("div",Z,[x(e("input",{"onUpdate:modelValue":o[4]||(o[4]=r=>s.ssl=r),type:"checkbox",id:"ssl-checkbox",class:"rounded bg-bg-tertiary border-border text-accent focus:ring-accent"},null,512),[[M,s.ssl]]),o[10]||(o[10]=e("label",{for:"ssl-checkbox",class:"text-sm text-text-secondary"},"Use SSL/TLS",-1))]),i.value?(p(),g("div",{key:0,class:S(["p-3 rounded-lg text-sm",i.value.success?"bg-success/10 text-success":"bg-error/10 text-error"])},[e("div",ee,[e("i",{class:S(["fas",i.value.success?"fa-check-circle":"fa-exclamation-circle"])},null,2),e("span",null,c(i.value.message),1)])],2)):N("",!0),e("div",te,[e("button",{type:"button",onClick:l,class:"btn btn-secondary flex-1",disabled:f.value},[e("i",{class:S(["fas mr-1",f.value?"fa-spinner fa-spin":"fa-plug"])},null,2),o[11]||(o[11]=y(" Test ",-1))],8,se),e("button",{type:"submit",class:"btn btn-primary flex-1",disabled:k.value},[e("i",{class:S(["fas mr-1",k.value?"fa-spinner fa-spin":"fa-save"])},null,2),o[12]||(o[12]=y(" Save ",-1))],8,oe)])],32)])])):N("",!0)}}),le={class:"p-6 space-y-6"},ie={class:"card"},ae={class:"space-y-4"},re={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},de={class:"bg-bg-tertiary rounded-lg p-4"},ue={class:"font-mono"},ce={class:"bg-bg-tertiary rounded-lg p-4"},me={class:"font-mono text-sm truncate"},ve={class:"bg-bg-tertiary rounded-lg p-4"},fe={class:"font-semibold"},pe={class:"bg-bg-tertiary rounded-lg p-4"},xe={class:"font-semibold"},be={class:"card"},ge={class:"space-y-4"},ye={class:"flex items-center justify-between py-2 border-b border-border"},he={class:"flex items-center justify-between py-2 border-b border-border"},ke={class:"flex items-center justify-between py-2 border-b border-border"},Ce={class:"flex items-center gap-2"},Se=["disabled"],we={class:"flex items-center justify-between py-2 border-b border-border"},Te={class:"flex items-center justify-between py-2"},$e={class:"card"},Ve={class:"flex items-center justify-between mb-4"},Ie={key:0,class:"space-y-2"},Le={class:"flex items-center gap-3"},Ne={class:"font-medium"},Me={class:"text-sm text-text-muted"},je={class:"flex items-center gap-2"},Ee=["onClick"],Ae=["onClick"],Ue=["onClick"],_e=["onClick"],De={key:1,class:"text-center text-text-muted py-8"},Pe={class:"card"},qe={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Re={class:"bg-bg-tertiary rounded-lg p-4 text-center"},Be={class:"text-2xl font-bold text-accent"},Oe=A({__name:"ConfigView",setup(d){const b=U(),m=Y(),h=O(),v=C("1.0.0"),s=C(!1),f=C(null),k=H(()=>b.serverList),i=L({host:"localhost",port:7687,dbPath:"",maxConnections:100,queryTimeout:3e4}),l=L({theme:"dark",defaultLimit:100,autoRefresh:!0,refreshInterval:30,historyLimit:100,graphPhysics:!0});async function T(){var t;const a=b.activeClient;if(a)try{const n=await((t=a.getConfig)==null?void 0:t.call(a));n!=null&&n.success&&n.data&&Object.assign(i,n.data)}catch(n){console.error("Failed to load server config:",n)}}function u(){const a=localStorage.getItem("nexus-settings");if(a)try{Object.assign(l,JSON.parse(a))}catch(t){console.error("Failed to parse settings:",t)}l.theme=m.theme}function o(){localStorage.setItem("nexus-settings",JSON.stringify(l)),h.success("Settings saved","Your preferences have been saved")}function r(){(l.theme==="dark"||l.theme==="light")&&m.setTheme(l.theme)}async function D(a){await b.connect(a)}async function P(a){await b.disconnect(a)}function q(a){f.value=a,s.value=!0}async function R(a){confirm("Are you sure you want to delete this connection?")&&(await b.removeServer(a),h.success("Connection deleted","The connection has been removed"))}function j(){s.value=!1,f.value=null}function B(){j(),h.success("Connection saved","The connection has been saved")}return _(()=>{T(),u()}),(a,t)=>(p(),g("div",le,[e("div",ie,[t[11]||(t[11]=e("h3",{class:"text-lg font-semibold mb-4 flex items-center gap-2"},[e("i",{class:"fas fa-server text-info"}),y(" Server Configuration ")],-1)),e("div",ae,[e("div",re,[e("div",de,[t[7]||(t[7]=e("div",{class:"text-sm text-text-secondary mb-1"},"Server Address",-1)),e("div",ue,c(i.host)+":"+c(i.port),1)]),e("div",ce,[t[8]||(t[8]=e("div",{class:"text-sm text-text-secondary mb-1"},"Database Path",-1)),e("div",me,c(i.dbPath||"N/A"),1)]),e("div",ve,[t[9]||(t[9]=e("div",{class:"text-sm text-text-secondary mb-1"},"Max Connections",-1)),e("div",fe,c(i.maxConnections),1)]),e("div",pe,[t[10]||(t[10]=e("div",{class:"text-sm text-text-secondary mb-1"},"Query Timeout",-1)),e("div",xe,c(i.queryTimeout)+"ms",1)])])])]),e("div",be,[t[22]||(t[22]=e("h3",{class:"text-lg font-semibold mb-4 flex items-center gap-2"},[e("i",{class:"fas fa-cog text-accent"}),y(" Application Settings ")],-1)),e("div",ge,[e("div",ye,[t[13]||(t[13]=e("div",null,[e("div",{class:"font-medium"},"Theme"),e("div",{class:"text-sm text-text-muted"},"Choose your preferred color scheme")],-1)),x(e("select",{"onUpdate:modelValue":t[0]||(t[0]=n=>l.theme=n),class:"input w-32",onChange:r},[...t[12]||(t[12]=[e("option",{value:"dark"},"Dark",-1),e("option",{value:"light"},"Light",-1),e("option",{value:"system"},"System",-1)])],544),[[w,l.theme]])]),e("div",he,[t[15]||(t[15]=e("div",null,[e("div",{class:"font-medium"},"Query Result Limit"),e("div",{class:"text-sm text-text-muted"},"Default LIMIT for queries")],-1)),x(e("select",{"onUpdate:modelValue":t[1]||(t[1]=n=>l.defaultLimit=n),class:"input w-32"},[...t[14]||(t[14]=[e("option",{value:25},"25",-1),e("option",{value:50},"50",-1),e("option",{value:100},"100",-1),e("option",{value:250},"250",-1),e("option",{value:500},"500",-1)])],512),[[w,l.defaultLimit,void 0,{number:!0}]])]),e("div",ke,[t[17]||(t[17]=e("div",null,[e("div",{class:"font-medium"},"Auto-refresh Dashboard"),e("div",{class:"text-sm text-text-muted"},"Automatically refresh dashboard stats")],-1)),e("div",Ce,[x(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>l.autoRefresh=n),type:"checkbox",class:"rounded bg-bg-tertiary border-border text-accent"},null,512),[[M,l.autoRefresh]]),x(e("select",{"onUpdate:modelValue":t[3]||(t[3]=n=>l.refreshInterval=n),class:"input w-24",disabled:!l.autoRefresh},[...t[16]||(t[16]=[e("option",{value:10},"10s",-1),e("option",{value:30},"30s",-1),e("option",{value:60},"60s",-1)])],8,Se),[[w,l.refreshInterval,void 0,{number:!0}]])])]),e("div",we,[t[19]||(t[19]=e("div",null,[e("div",{class:"font-medium"},"Query History"),e("div",{class:"text-sm text-text-muted"},"Number of queries to keep in history")],-1)),x(e("select",{"onUpdate:modelValue":t[4]||(t[4]=n=>l.historyLimit=n),class:"input w-32"},[...t[18]||(t[18]=[e("option",{value:50},"50",-1),e("option",{value:100},"100",-1),e("option",{value:200},"200",-1),e("option",{value:500},"500",-1)])],512),[[w,l.historyLimit,void 0,{number:!0}]])]),e("div",Te,[t[20]||(t[20]=e("div",null,[e("div",{class:"font-medium"},"Graph Physics"),e("div",{class:"text-sm text-text-muted"},"Enable physics simulation in graph view")],-1)),x(e("input",{"onUpdate:modelValue":t[5]||(t[5]=n=>l.graphPhysics=n),type:"checkbox",class:"rounded bg-bg-tertiary border-border text-accent"},null,512),[[M,l.graphPhysics]])])]),e("div",{class:"flex justify-end mt-6"},[e("button",{onClick:o,class:"btn btn-primary"},[...t[21]||(t[21]=[e("i",{class:"fas fa-save mr-1"},null,-1),y(" Save Settings ",-1)])])])]),e("div",$e,[e("div",Ve,[t[24]||(t[24]=e("h3",{class:"text-lg font-semibold flex items-center gap-2"},[e("i",{class:"fas fa-plug text-success"}),y(" Saved Connections ")],-1)),e("button",{onClick:t[6]||(t[6]=n=>s.value=!0),class:"btn btn-primary text-xs"},[...t[23]||(t[23]=[e("i",{class:"fas fa-plus mr-1"},null,-1),y(" Add Connection ",-1)])])]),k.value.length>0?(p(),g("div",Ie,[(p(!0),g(G,null,Q(k.value,n=>(p(),g("div",{key:n.id,class:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg"},[e("div",Le,[e("span",{class:S(["w-3 h-3 rounded-full",n.status==="connected"?"bg-success":"bg-text-muted"])},null,2),e("div",null,[e("div",Ne,c(n.name),1),e("div",Me,c(n.host||n.url)+c(n.port?":"+n.port:""),1)])]),e("div",je,[n.status!=="connected"?(p(),g("button",{key:0,onClick:$=>D(n.id),class:"btn btn-secondary text-xs"}," Connect ",8,Ee)):(p(),g("button",{key:1,onClick:$=>P(n.id),class:"btn btn-secondary text-xs"}," Disconnect ",8,Ae)),e("button",{onClick:$=>q(n),class:"p-1 text-text-muted hover:text-text-primary"},[...t[25]||(t[25]=[e("i",{class:"fas fa-edit"},null,-1)])],8,Ue),e("button",{onClick:$=>R(n.id),class:"p-1 text-text-muted hover:text-error"},[...t[26]||(t[26]=[e("i",{class:"fas fa-trash"},null,-1)])],8,_e)])]))),128))])):(p(),g("div",De,[...t[27]||(t[27]=[e("i",{class:"fas fa-plug text-2xl mb-2"},null,-1),e("p",null,"No saved connections",-1)])]))]),e("div",Pe,[t[30]||(t[30]=e("h3",{class:"text-lg font-semibold mb-4 flex items-center gap-2"},[e("i",{class:"fas fa-info-circle text-warning"}),y(" About Nexus ")],-1)),e("div",qe,[e("div",Re,[e("div",Be,c(v.value),1),t[28]||(t[28]=e("div",{class:"text-sm text-text-muted"},"Version",-1))]),t[29]||(t[29]=J('<div class="bg-bg-tertiary rounded-lg p-4 text-center"><div class="text-2xl font-bold text-info">Rust</div><div class="text-sm text-text-muted">Backend</div></div><div class="bg-bg-tertiary rounded-lg p-4 text-center"><div class="text-2xl font-bold text-success">Vue 3</div><div class="text-sm text-text-muted">Frontend</div></div><div class="bg-bg-tertiary rounded-lg p-4 text-center"><div class="text-2xl font-bold text-warning">Electron</div><div class="text-sm text-text-muted">Platform</div></div>',3))]),t[31]||(t[31]=e("div",{class:"mt-4 text-center text-text-muted text-sm"},[e("p",null,"Nexus Graph Database - A high-performance graph database with Cypher support"),e("p",{class:"mt-1"},[e("a",{href:"https://github.com/your-repo/nexus",class:"text-accent hover:underline",target:"_blank"},[e("i",{class:"fab fa-github mr-1"}),y(" GitHub Repository ")])])],-1))]),s.value?(p(),z(ne,{key:0,"editing-server":f.value,onClose:j,onSaved:B},null,8,["editing-server"])):N("",!0)]))}});export{Oe as default};
