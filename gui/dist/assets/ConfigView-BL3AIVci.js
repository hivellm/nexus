import{d as U,u as A,C as N,r as C,f as D,a as v,e as I,v as M,b as e,t as u,x as m,y as T,E as L,n as S,i as f,o as c,s as B,c as O,H as E,A as w,F as H,l as G,D as Q}from"./index-BQpexqeV.js";import{u as z}from"./notifications-BrYD8Eyi.js";const J={class:"bg-bg-elevated rounded-xl p-6 w-full max-w-md border border-border shadow-xl"},Y={class:"flex items-center justify-between mb-6"},K={class:"text-lg font-semibold text-text-primary"},W={class:"flex items-center gap-2"},X={class:"flex items-center gap-2"},Z={class:"flex items-center gap-2 pt-2"},ee=["disabled"],te=["disabled"],se=U({__name:"ServerConnectionModal",props:{isOpen:{type:Boolean},serverId:{}},emits:["close","saved"],setup(k,{emit:p}){const b=k,y=p,h=A(),n=N({name:"",host:"localhost",port:7687,ssl:!1}),x=C(!1),g=C(!1),l=C(null);D(()=>{var d;if(b.serverId){const s=h.getServer(b.serverId);s&&(n.name=s.name,n.host=s.host||((d=s.url)==null?void 0:d.replace(/^https?:\/\//,"").split(":")[0])||"localhost",n.port=s.port||15474,n.ssl=s.ssl||!1)}});async function i(){var d;x.value=!0,l.value=null;try{const r=await h.createClient({id:"test",name:n.name,host:n.host,port:n.port,ssl:n.ssl,connected:!1,status:"disconnected"}).healthCheck();r.success?l.value={success:!0,message:`Connected! Server is ${((d=r.data)==null?void 0:d.status)||"healthy"}`}:l.value={success:!1,message:r.error||"Connection failed"}}catch(s){l.value={success:!1,message:s.message||"Connection failed"}}finally{x.value=!1}}async function $(){g.value=!0;try{b.serverId?h.updateServer(b.serverId,{name:n.name,host:n.host,port:n.port,ssl:n.ssl}):h.addServer({name:n.name,host:n.host,port:n.port,ssl:n.ssl}),y("saved"),y("close")}catch(d){l.value={success:!1,message:d.message||"Failed to save connection"}}finally{g.value=!1}}return(d,s)=>k.isOpen?(c(),v("div",{key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:s[5]||(s[5]=M(r=>d.$emit("close"),["self"]))},[e("div",J,[e("div",Y,[e("h3",K,u(k.serverId?"Edit Connection":"New Connection"),1),e("button",{onClick:s[0]||(s[0]=r=>d.$emit("close")),class:"p-2 text-text-muted hover:text-text-primary hover:bg-bg-hover rounded transition-colors"},[...s[6]||(s[6]=[e("i",{class:"fas fa-times"},null,-1)])])]),e("form",{onSubmit:M($,["prevent"]),class:"space-y-4"},[e("div",null,[s[7]||(s[7]=e("label",{class:"block text-sm text-text-secondary mb-1"},"Connection Name",-1)),m(e("input",{"onUpdate:modelValue":s[1]||(s[1]=r=>n.name=r),type:"text",class:"input",placeholder:"My Nexus Server",required:""},null,512),[[T,n.name]])]),e("div",null,[s[8]||(s[8]=e("label",{class:"block text-sm text-text-secondary mb-1"},"Host",-1)),m(e("input",{"onUpdate:modelValue":s[2]||(s[2]=r=>n.host=r),type:"text",class:"input",placeholder:"localhost",required:""},null,512),[[T,n.host]])]),e("div",null,[s[9]||(s[9]=e("label",{class:"block text-sm text-text-secondary mb-1"},"Port",-1)),m(e("input",{"onUpdate:modelValue":s[3]||(s[3]=r=>n.port=r),type:"number",class:"input",placeholder:"7687",required:""},null,512),[[T,n.port,void 0,{number:!0}]])]),e("div",W,[m(e("input",{"onUpdate:modelValue":s[4]||(s[4]=r=>n.ssl=r),type:"checkbox",id:"ssl-checkbox",class:"rounded bg-bg-tertiary border-border text-accent focus:ring-accent"},null,512),[[L,n.ssl]]),s[10]||(s[10]=e("label",{for:"ssl-checkbox",class:"text-sm text-text-secondary"},"Use SSL/TLS",-1))]),l.value?(c(),v("div",{key:0,class:S(["p-3 rounded-lg text-sm",l.value.success?"bg-success/10 text-success":"bg-error/10 text-error"])},[e("div",X,[e("i",{class:S(["fas",l.value.success?"fa-check-circle":"fa-exclamation-circle"])},null,2),e("span",null,u(l.value.message),1)])],2)):I("",!0),e("div",Z,[e("button",{type:"button",onClick:i,class:"btn btn-secondary flex-1",disabled:x.value},[e("i",{class:S(["fas mr-1",x.value?"fa-spinner fa-spin":"fa-plug"])},null,2),s[11]||(s[11]=f(" Test ",-1))],8,ee),e("button",{type:"submit",class:"btn btn-primary flex-1",disabled:g.value},[e("i",{class:S(["fas mr-1",g.value?"fa-spinner fa-spin":"fa-save"])},null,2),s[12]||(s[12]=f(" Save ",-1))],8,te)])],32)])])):I("",!0)}}),oe={class:"p-6 space-y-6"},ne={class:"card"},ie={class:"space-y-4"},le={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ae={class:"bg-bg-tertiary rounded-lg p-4"},re={class:"font-mono"},de={class:"bg-bg-tertiary rounded-lg p-4"},ue={class:"font-mono text-sm truncate"},ce={class:"bg-bg-tertiary rounded-lg p-4"},me={class:"font-semibold"},ve={class:"bg-bg-tertiary rounded-lg p-4"},fe={class:"font-semibold"},xe={class:"card"},pe={class:"space-y-4"},be={class:"flex items-center justify-between py-2 border-b border-border"},ge={class:"flex items-center justify-between py-2 border-b border-border"},ye={class:"flex items-center justify-between py-2 border-b border-border"},he={class:"flex items-center gap-2"},Ce=["disabled"],Se={class:"flex items-center justify-between py-2 border-b border-border"},ke={class:"flex items-center justify-between py-2"},we={class:"card"},$e={class:"flex items-center justify-between mb-4"},Ve={key:0,class:"space-y-2"},Te={class:"flex items-center gap-3"},Ne={class:"font-medium"},Ie={class:"text-sm text-text-muted"},Le={class:"flex items-center gap-2"},je=["onClick"],Me=["onClick"],Ue=["onClick"],Ae=["onClick"],De={key:1,class:"text-center text-text-muted py-8"},Pe={class:"card"},_e={class:"grid grid-cols-2 md:grid-cols-4 gap-4"},Re={class:"bg-bg-tertiary rounded-lg p-4 text-center"},qe={class:"text-2xl font-bold text-accent"},Oe=U({__name:"ConfigView",setup(k){const p=A(),b=B(),y=z(),h=C("1.0.0"),n=C(!1),x=C(null),g=O(()=>p.serverList),l=N({host:"localhost",port:7687,dbPath:"",maxConnections:100,queryTimeout:3e4}),i=N({theme:"dark",defaultLimit:100,autoRefresh:!0,refreshInterval:30,historyLimit:100,graphPhysics:!0});async function $(){var t;const a=p.activeClient;if(a)try{const o=await((t=a.getConfig)==null?void 0:t.call(a));o!=null&&o.success&&o.data&&Object.assign(l,o.data)}catch(o){console.error("Failed to load server config:",o)}}function d(){const a=localStorage.getItem("nexus-settings");if(a)try{Object.assign(i,JSON.parse(a))}catch(t){console.error("Failed to parse settings:",t)}i.theme=b.theme}function s(){localStorage.setItem("nexus-settings",JSON.stringify(i)),y.success("Settings saved","Your preferences have been saved")}function r(){(i.theme==="dark"||i.theme==="light")&&b.setTheme(i.theme)}async function P(a){await p.connect(a)}async function _(a){await p.disconnect(a)}function R(a){x.value=a,n.value=!0}async function q(a){confirm("Are you sure you want to delete this connection?")&&(await p.removeServer(a),y.success("Connection deleted","The connection has been removed"))}function j(){n.value=!1,x.value=null}function F(){j(),y.success("Connection saved","The connection has been saved")}return D(()=>{$(),d()}),(a,t)=>(c(),v("div",oe,[e("div",ne,[t[11]||(t[11]=e("h3",{class:"text-lg font-semibold mb-4 flex items-center gap-2"},[e("i",{class:"fas fa-server text-info"}),f(" Server Configuration ")],-1)),e("div",ie,[e("div",le,[e("div",ae,[t[7]||(t[7]=e("div",{class:"text-sm text-text-secondary mb-1"},"Server Address",-1)),e("div",re,u(l.host)+":"+u(l.port),1)]),e("div",de,[t[8]||(t[8]=e("div",{class:"text-sm text-text-secondary mb-1"},"Database Path",-1)),e("div",ue,u(l.dbPath||"N/A"),1)]),e("div",ce,[t[9]||(t[9]=e("div",{class:"text-sm text-text-secondary mb-1"},"Max Connections",-1)),e("div",me,u(l.maxConnections),1)]),e("div",ve,[t[10]||(t[10]=e("div",{class:"text-sm text-text-secondary mb-1"},"Query Timeout",-1)),e("div",fe,u(l.queryTimeout)+"ms",1)])])])]),e("div",xe,[t[22]||(t[22]=e("h3",{class:"text-lg font-semibold mb-4 flex items-center gap-2"},[e("i",{class:"fas fa-cog text-accent"}),f(" Application Settings ")],-1)),e("div",pe,[e("div",be,[t[13]||(t[13]=e("div",null,[e("div",{class:"font-medium"},"Theme"),e("div",{class:"text-sm text-text-muted"},"Choose your preferred color scheme")],-1)),m(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>i.theme=o),class:"input w-32",onChange:r},[...t[12]||(t[12]=[e("option",{value:"dark"},"Dark",-1),e("option",{value:"light"},"Light",-1),e("option",{value:"system"},"System",-1)])],544),[[w,i.theme]])]),e("div",ge,[t[15]||(t[15]=e("div",null,[e("div",{class:"font-medium"},"Query Result Limit"),e("div",{class:"text-sm text-text-muted"},"Default LIMIT for queries")],-1)),m(e("select",{"onUpdate:modelValue":t[1]||(t[1]=o=>i.defaultLimit=o),class:"input w-32"},[...t[14]||(t[14]=[e("option",{value:25},"25",-1),e("option",{value:50},"50",-1),e("option",{value:100},"100",-1),e("option",{value:250},"250",-1),e("option",{value:500},"500",-1)])],512),[[w,i.defaultLimit,void 0,{number:!0}]])]),e("div",ye,[t[17]||(t[17]=e("div",null,[e("div",{class:"font-medium"},"Auto-refresh Dashboard"),e("div",{class:"text-sm text-text-muted"},"Automatically refresh dashboard stats")],-1)),e("div",he,[m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>i.autoRefresh=o),type:"checkbox",class:"rounded bg-bg-tertiary border-border text-accent"},null,512),[[L,i.autoRefresh]]),m(e("select",{"onUpdate:modelValue":t[3]||(t[3]=o=>i.refreshInterval=o),class:"input w-24",disabled:!i.autoRefresh},[...t[16]||(t[16]=[e("option",{value:10},"10s",-1),e("option",{value:30},"30s",-1),e("option",{value:60},"60s",-1)])],8,Ce),[[w,i.refreshInterval,void 0,{number:!0}]])])]),e("div",Se,[t[19]||(t[19]=e("div",null,[e("div",{class:"font-medium"},"Query History"),e("div",{class:"text-sm text-text-muted"},"Number of queries to keep in history")],-1)),m(e("select",{"onUpdate:modelValue":t[4]||(t[4]=o=>i.historyLimit=o),class:"input w-32"},[...t[18]||(t[18]=[e("option",{value:50},"50",-1),e("option",{value:100},"100",-1),e("option",{value:200},"200",-1),e("option",{value:500},"500",-1)])],512),[[w,i.historyLimit,void 0,{number:!0}]])]),e("div",ke,[t[20]||(t[20]=e("div",null,[e("div",{class:"font-medium"},"Graph Physics"),e("div",{class:"text-sm text-text-muted"},"Enable physics simulation in graph view")],-1)),m(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>i.graphPhysics=o),type:"checkbox",class:"rounded bg-bg-tertiary border-border text-accent"},null,512),[[L,i.graphPhysics]])])]),e("div",{class:"flex justify-end mt-6"},[e("button",{onClick:s,class:"btn btn-primary"},[...t[21]||(t[21]=[e("i",{class:"fas fa-save mr-1"},null,-1),f(" Save Settings ",-1)])])])]),e("div",we,[e("div",$e,[t[24]||(t[24]=e("h3",{class:"text-lg font-semibold flex items-center gap-2"},[e("i",{class:"fas fa-plug text-success"}),f(" Saved Connections ")],-1)),e("button",{onClick:t[6]||(t[6]=o=>n.value=!0),class:"btn btn-primary text-xs"},[...t[23]||(t[23]=[e("i",{class:"fas fa-plus mr-1"},null,-1),f(" Add Connection ",-1)])])]),g.value.length>0?(c(),v("div",Ve,[(c(!0),v(H,null,G(g.value,o=>(c(),v("div",{key:o.id,class:"flex items-center justify-between p-3 bg-bg-tertiary rounded-lg"},[e("div",Te,[e("span",{class:S(["w-3 h-3 rounded-full",o.status==="connected"?"bg-success":"bg-text-muted"])},null,2),e("div",null,[e("div",Ne,u(o.name),1),e("div",Ie,u(o.host||o.url)+u(o.port?":"+o.port:""),1)])]),e("div",Le,[o.status!=="connected"?(c(),v("button",{key:0,onClick:V=>P(o.id),class:"btn btn-secondary text-xs"}," Connect ",8,je)):(c(),v("button",{key:1,onClick:V=>_(o.id),class:"btn btn-secondary text-xs"}," Disconnect ",8,Me)),e("button",{onClick:V=>R(o),class:"p-1 text-text-muted hover:text-text-primary"},[...t[25]||(t[25]=[e("i",{class:"fas fa-edit"},null,-1)])],8,Ue),e("button",{onClick:V=>q(o.id),class:"p-1 text-text-muted hover:text-error"},[...t[26]||(t[26]=[e("i",{class:"fas fa-trash"},null,-1)])],8,Ae)])]))),128))])):(c(),v("div",De,[...t[27]||(t[27]=[e("i",{class:"fas fa-plug text-2xl mb-2"},null,-1),e("p",null,"No saved connections",-1)])]))]),e("div",Pe,[t[30]||(t[30]=e("h3",{class:"text-lg font-semibold mb-4 flex items-center gap-2"},[e("i",{class:"fas fa-info-circle text-warning"}),f(" About Nexus ")],-1)),e("div",_e,[e("div",Re,[e("div",qe,u(h.value),1),t[28]||(t[28]=e("div",{class:"text-sm text-text-muted"},"Version",-1))]),t[29]||(t[29]=Q('<div class="bg-bg-tertiary rounded-lg p-4 text-center"><div class="text-2xl font-bold text-info">Rust</div><div class="text-sm text-text-muted">Backend</div></div><div class="bg-bg-tertiary rounded-lg p-4 text-center"><div class="text-2xl font-bold text-success">Vue 3</div><div class="text-sm text-text-muted">Frontend</div></div><div class="bg-bg-tertiary rounded-lg p-4 text-center"><div class="text-2xl font-bold text-warning">Electron</div><div class="text-sm text-text-muted">Platform</div></div>',3))]),t[31]||(t[31]=e("div",{class:"mt-4 text-center text-text-muted text-sm"},[e("p",null,"Nexus Graph Database - A high-performance graph database with Cypher support"),e("p",{class:"mt-1"},[e("a",{href:"https://github.com/your-repo/nexus",class:"text-accent hover:underline",target:"_blank"},[e("i",{class:"fab fa-github mr-1"}),f(" GitHub Repository ")])])],-1))]),n.value?(c(),E(se,{key:0,"editing-server":x.value,onClose:j,onSaved:F},null,8,["editing-server"])):I("",!0)]))}});export{Oe as default};
