import{d as L,u as S,r as m,f as j,a as l,b as e,e as k,i as d,n as T,F as u,l as c,t as a,x as $,m as V,o as n}from"./index-BG-UUOg-.js";import{u as q}from"./query-rEsvMwX3.js";const z={class:"p-6 space-y-6"},K={class:"card"},M={class:"flex items-center justify-between mb-4"},P={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},B=["onClick"],F={class:"flex items-center justify-between mb-2"},I={class:"font-medium text-text-primary"},Q={class:"text-xs text-text-muted"},E={class:"flex flex-wrap gap-1"},A={key:0,class:"text-xs text-text-muted"},D={key:1,class:"text-center text-text-muted py-8"},H={class:"card"},U={key:0,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},G={class:"flex items-center justify-between mb-2"},J={class:"font-medium text-text-primary"},O={class:"text-xs text-text-muted"},W={class:"flex flex-wrap gap-1"},X={key:1,class:"text-center text-text-muted py-8"},Y={class:"card"},Z={key:0,class:"flex flex-wrap gap-2"},ee={key:1,class:"text-center text-text-muted py-8"},te={class:"bg-bg-elevated rounded-lg p-6 w-full max-w-lg max-h-[80vh] overflow-y-auto"},se={class:"flex items-center justify-between mb-4"},le={class:"text-lg font-semibold"},ne={class:"space-y-4"},ae={class:"text-2xl font-semibold"},oe={class:"table"},ie={class:"text-xs text-text-muted"},re={key:0,class:"fas fa-check text-success"},de={key:1,class:"fas fa-times text-text-muted"},ue={class:"flex gap-2"},fe=L({__name:"SchemaView",setup(ce){const b=V(),w=S(),C=q(),f=m([]),p=m([]),y=m([]),v=m(!1),o=m(null);async function h(){const i=w.activeClient;if(i){v.value=!0;try{const[t,s,r]=await Promise.all([i.getLabels(),i.getRelationshipTypes(),i.getPropertyKeys()]);t.success&&t.data&&(f.value=t.data),s.success&&s.data&&(p.value=s.data),r.success&&r.data&&(y.value=r.data)}catch(t){console.error("Failed to load schema:",t)}finally{v.value=!1}}}function N(i){C.setQuery(`MATCH (n:${i}) RETURN n LIMIT 100`),b.push("/query"),o.value=null}function R(i){b.push({path:"/graph",query:{label:i}}),o.value=null}return j(()=>{h()}),(i,t)=>(n(),l("div",z,[e("div",K,[e("div",M,[t[5]||(t[5]=e("h3",{class:"text-lg font-semibold flex items-center gap-2"},[e("i",{class:"fas fa-tag text-info"}),d(" Node Labels ")],-1)),e("button",{onClick:h,class:"btn btn-secondary text-xs"},[e("i",{class:T(["fas mr-1",v.value?"fa-spinner fa-spin":"fa-sync"])},null,2),t[4]||(t[4]=d(" Refresh ",-1))])]),f.value.length>0?(n(),l("div",P,[(n(!0),l(u,null,c(f.value,s=>{var r,x,_;return n(),l("div",{key:s.name,class:"bg-bg-tertiary rounded-lg p-4 cursor-pointer hover:bg-bg-hover transition-colors",onClick:g=>o.value=s},[e("div",F,[e("span",I,a(s.name),1),e("span",Q,a(s.count)+" nodes",1)]),e("div",E,[(n(!0),l(u,null,c((r=s.properties)==null?void 0:r.slice(0,3),g=>(n(),l("span",{key:g.name,class:"px-2 py-0.5 bg-bg-hover rounded text-xs text-text-secondary"},a(g.name),1))),128)),(((x=s.properties)==null?void 0:x.length)||0)>3?(n(),l("span",A," +"+a((((_=s.properties)==null?void 0:_.length)||0)-3)+" more ",1)):k("",!0)])],8,B)}),128))])):(n(),l("div",D,[...t[6]||(t[6]=[e("i",{class:"fas fa-tag text-2xl mb-2"},null,-1),e("p",null,"No labels found",-1)])]))]),e("div",H,[t[8]||(t[8]=e("h3",{class:"text-lg font-semibold mb-4 flex items-center gap-2"},[e("i",{class:"fas fa-arrow-right text-success"}),d(" Relationship Types ")],-1)),p.value.length>0?(n(),l("div",U,[(n(!0),l(u,null,c(p.value,s=>{var r;return n(),l("div",{key:s.name,class:"bg-bg-tertiary rounded-lg p-4"},[e("div",G,[e("span",J,a(s.name),1),e("span",O,a(s.count)+" rels",1)]),e("div",W,[(n(!0),l(u,null,c((r=s.properties)==null?void 0:r.slice(0,3),x=>(n(),l("span",{key:x.name,class:"px-2 py-0.5 bg-bg-hover rounded text-xs text-text-secondary"},a(x.name),1))),128))])])}),128))])):(n(),l("div",X,[...t[7]||(t[7]=[e("i",{class:"fas fa-arrow-right text-2xl mb-2"},null,-1),e("p",null,"No relationship types found",-1)])]))]),e("div",Y,[t[10]||(t[10]=e("h3",{class:"text-lg font-semibold mb-4 flex items-center gap-2"},[e("i",{class:"fas fa-key text-warning"}),d(" Property Keys ")],-1)),y.value.length>0?(n(),l("div",Z,[(n(!0),l(u,null,c(y.value,s=>(n(),l("span",{key:s,class:"px-3 py-1 bg-bg-tertiary rounded-full text-sm text-text-secondary"},a(s),1))),128))])):(n(),l("div",ee,[...t[9]||(t[9]=[e("i",{class:"fas fa-key text-2xl mb-2"},null,-1),e("p",null,"No property keys found",-1)])]))]),o.value?(n(),l("div",{key:0,class:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t[3]||(t[3]=$(s=>o.value=null,["self"]))},[e("div",te,[e("div",se,[e("h3",le,a(o.value.name),1),e("button",{onClick:t[0]||(t[0]=s=>o.value=null),class:"text-text-muted hover:text-text-primary"},[...t[11]||(t[11]=[e("i",{class:"fas fa-times"},null,-1)])])]),e("div",ne,[e("div",null,[t[12]||(t[12]=e("div",{class:"text-sm text-text-muted mb-1"},"Node Count",-1)),e("div",ae,a(o.value.count),1)]),e("div",null,[t[14]||(t[14]=e("div",{class:"text-sm text-text-muted mb-2"},"Properties",-1)),e("table",oe,[t[13]||(t[13]=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Type"),e("th",null,"Indexed")])],-1)),e("tbody",null,[(n(!0),l(u,null,c(o.value.properties,s=>(n(),l("tr",{key:s.name},[e("td",null,a(s.name),1),e("td",null,[e("span",ie,a(s.type),1)]),e("td",null,[s.indexed?(n(),l("i",re)):(n(),l("i",de))])]))),128))])])]),e("div",ue,[e("button",{onClick:t[1]||(t[1]=s=>N(o.value.name)),class:"btn btn-primary flex-1"},[...t[15]||(t[15]=[e("i",{class:"fas fa-search mr-1"},null,-1),d(" Query Nodes ",-1)])]),e("button",{onClick:t[2]||(t[2]=s=>R(o.value.name)),class:"btn btn-secondary flex-1"},[...t[16]||(t[16]=[e("i",{class:"fas fa-project-diagram mr-1"},null,-1),d(" Visualize ",-1)])])])])])])):k("",!0)]))}});export{fe as default};
