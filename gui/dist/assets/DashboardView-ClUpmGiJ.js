import{d as Q,c as i,n as v,a as t,b as z,t as l,o as d,u as I,r as N,e as L,f as U,g as j,h as x,i as E,F as q,j as G,k as y,l as A}from"./index-BNyczF3N.js";import{u as H}from"./query-CczXuno5.js";const J={class:"flex-1 min-w-0"},K={class:"text-3xl font-bold text-text-primary leading-tight"},P={class:"text-sm text-text-secondary mt-1"},O={key:0,class:"text-xs text-text-muted mt-1"},g=Q({__name:"StatCard",props:{icon:{},value:{},label:{},subtitle:{},variant:{default:"primary"}},setup(s){return(p,w)=>(d(),i("div",{class:v(["bg-bg-secondary border border-border rounded-xl shadow-md p-6 flex gap-4 items-center transition-all hover:-translate-y-0.5 hover:shadow-lg hover:bg-bg-hover hover:border-border-light",{"hover:bg-info/10":s.variant==="primary"||s.variant==="info","hover:bg-bg-hover":s.variant==="secondary","hover:bg-success/10":s.variant==="success","hover:bg-warning/10":s.variant==="warning","hover:bg-error/10":s.variant==="danger"}])},[t("div",{class:v(["w-12 h-12 rounded-lg flex items-center justify-center text-2xl flex-shrink-0",{"bg-blue-500/20 text-blue-400":s.variant==="primary"||s.variant==="info","bg-bg-tertiary text-text-secondary":s.variant==="secondary","bg-green-500/20 text-green-400":s.variant==="success","bg-yellow-500/20 text-yellow-400":s.variant==="warning","bg-red-500/20 text-red-400":s.variant==="danger"}])},[t("i",{class:v(s.icon)},null,2)],2),t("div",J,[t("div",K,l(s.value),1),t("div",P,l(s.label),1),s.subtitle?(d(),i("div",O,l(s.subtitle),1)):z("",!0)])],2))}}),W={class:"p-8"},X={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"},Y={class:"bg-bg-secondary border border-border rounded-xl p-6 mb-8"},Z={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},_={class:"bg-bg-secondary border border-border rounded-xl p-6 mb-8"},tt={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-6"},et={class:"bg-bg-tertiary border border-border rounded-lg p-4"},rt={class:"flex items-center gap-2"},st={class:"text-lg font-semibold text-text-primary capitalize"},ot={class:"bg-bg-tertiary border border-border rounded-lg p-4"},at={class:"text-lg font-semibold text-text-primary"},lt={class:"w-full bg-bg-primary rounded-full h-2 mt-2"},nt={class:"bg-bg-tertiary border border-border rounded-lg p-4"},it={class:"text-lg font-semibold text-text-primary"},dt={key:1,class:"text-text-secondary text-center py-8"},ut={class:"bg-bg-secondary border border-border rounded-xl p-6"},ct={key:0,class:"space-y-2"},bt=["onClick"],mt={class:"font-mono text-sm text-text-primary truncate"},xt={class:"flex items-center gap-4 mt-2 text-xs text-text-secondary"},gt={key:1,class:"text-text-secondary text-center py-8"},yt=Q({__name:"DashboardView",setup(s){const p=A(),w=I(),k=H(),c=N(null),u=N(null);let f=null;const $=L(()=>k.recentQueries);async function h(){const r=w.activeClient;if(r)try{const[e,o]=await Promise.all([r.getStats(),r.healthCheck()]);e.success&&e.data&&(c.value=e.data),o.success&&o.data&&(u.value=o.data)}catch(e){console.error("Failed to load dashboard data:",e)}}async function R(){await h()}function V(r){k.setQuery(r),p.push("/query")}function m(r){return new Intl.NumberFormat().format(r)}function C(r){if(r===0)return"0 B";const e=1024,o=["B","KB","MB","GB","TB"],a=Math.floor(Math.log(r)/Math.log(e));return parseFloat((r/Math.pow(e,a)).toFixed(2))+" "+o[a]}function F(r){const e=Math.floor(r/86400),o=Math.floor(r%86400/3600),a=Math.floor(r%3600/60);return e>0?`${e}d ${o}h`:o>0?`${o}h ${a}m`:`${a}m`}function T(r){const o=new Date().getTime()-new Date(r).getTime(),a=Math.floor(o/6e4),b=Math.floor(o/36e5);return a<1?"Just now":a<60?`${a}m ago`:b<24?`${b}h ago`:new Date(r).toLocaleDateString()}return U(()=>{h(),f=setInterval(h,3e4)}),j(()=>{f&&clearInterval(f)}),(r,e)=>{var o,a,b,S,M,B,D;return d(),i("div",W,[t("div",X,[x(g,{icon:"fas fa-circle-nodes",value:m(((o=c.value)==null?void 0:o.nodeCount)||0),label:"Nodes",variant:"primary"},null,8,["value"]),x(g,{icon:"fas fa-arrows-left-right",value:m(((a=c.value)==null?void 0:a.relationshipCount)||0),label:"Relationships",variant:"success"},null,8,["value"]),x(g,{icon:"fas fa-tags",value:m(((b=c.value)==null?void 0:b.labelCount)||0),label:"Labels",variant:"info"},null,8,["value"]),x(g,{icon:"fas fa-list",value:m(((S=c.value)==null?void 0:S.indexCount)||0),label:"Indexes",variant:"secondary"},null,8,["value"])]),t("div",Y,[e[7]||(e[7]=t("h2",{class:"text-xl font-semibold text-text-primary mb-6"},"Quick Actions",-1)),t("div",Z,[t("button",{onClick:e[0]||(e[0]=n=>r.$router.push("/query")),class:"bg-bg-tertiary border border-border rounded-lg p-6 text-left hover:bg-bg-hover hover:border-border-light transition-colors group"},[...e[3]||(e[3]=[t("i",{class:"fas fa-terminal text-2xl text-text-secondary group-hover:text-text-primary mb-3 block"},null,-1),t("h3",{class:"text-lg font-medium text-text-primary mb-2"},"Query Editor",-1),t("p",{class:"text-sm text-text-secondary"},"Run Cypher queries",-1)])]),t("button",{onClick:e[1]||(e[1]=n=>r.$router.push("/graph")),class:"bg-bg-tertiary border border-border rounded-lg p-6 text-left hover:bg-bg-hover hover:border-border-light transition-colors group"},[...e[4]||(e[4]=[t("i",{class:"fas fa-project-diagram text-2xl text-text-secondary group-hover:text-text-primary mb-3 block"},null,-1),t("h3",{class:"text-lg font-medium text-text-primary mb-2"},"Explore Graph",-1),t("p",{class:"text-sm text-text-secondary"},"Visualize relationships",-1)])]),t("button",{onClick:e[2]||(e[2]=n=>r.$router.push("/schema")),class:"bg-bg-tertiary border border-border rounded-lg p-6 text-left hover:bg-bg-hover hover:border-border-light transition-colors group"},[...e[5]||(e[5]=[t("i",{class:"fas fa-sitemap text-2xl text-text-secondary group-hover:text-text-primary mb-3 block"},null,-1),t("h3",{class:"text-lg font-medium text-text-primary mb-2"},"View Schema",-1),t("p",{class:"text-sm text-text-secondary"},"Labels and types",-1)])]),t("button",{onClick:R,class:"bg-bg-tertiary border border-border rounded-lg p-6 text-left hover:bg-bg-hover hover:border-border-light transition-colors group"},[...e[6]||(e[6]=[t("i",{class:"fas fa-sync text-2xl text-text-secondary group-hover:text-text-primary mb-3 block"},null,-1),t("h3",{class:"text-lg font-medium text-text-primary mb-2"},"Refresh Data",-1),t("p",{class:"text-sm text-text-secondary"},"Reload statistics",-1)])])])]),t("div",_,[e[12]||(e[12]=t("h2",{class:"text-xl font-semibold text-text-primary mb-6"},"Server Health",-1)),u.value?(d(),i("div",tt,[t("div",et,[e[8]||(e[8]=t("div",{class:"text-sm text-text-secondary mb-2"},"Status",-1)),t("div",rt,[t("span",{class:v(["w-3 h-3 rounded-full",u.value.status==="healthy"?"bg-success":"bg-error"])},null,2),t("span",st,l(u.value.status),1)])]),t("div",ot,[e[9]||(e[9]=t("div",{class:"text-sm text-text-secondary mb-2"},"Memory Usage",-1)),t("div",at,l(C(((M=u.value.memory)==null?void 0:M.used)||0))+" / "+l(C(((B=u.value.memory)==null?void 0:B.total)||0)),1),t("div",lt,[t("div",{class:"bg-info h-2 rounded-full transition-all",style:E({width:`${((D=u.value.memory)==null?void 0:D.percentage)||0}%`})},null,4)])]),t("div",nt,[e[10]||(e[10]=t("div",{class:"text-sm text-text-secondary mb-2"},"Uptime",-1)),t("div",it,l(F(u.value.uptime||0)),1)])])):(d(),i("div",dt,[...e[11]||(e[11]=[t("i",{class:"fas fa-spinner fa-spin text-2xl mb-3 block"},null,-1),t("p",{class:"text-sm"},"Loading server health...",-1)])]))]),t("div",ut,[e[17]||(e[17]=t("h2",{class:"text-xl font-semibold text-text-primary mb-6"},"Recent Queries",-1)),$.value.length>0?(d(),i("div",ct,[(d(!0),i(q,null,G($.value.slice(0,5),n=>(d(),i("div",{key:n.id,class:"p-4 bg-bg-tertiary border border-border rounded-lg cursor-pointer hover:bg-bg-hover hover:border-border-light transition-colors",onClick:vt=>V(n.query)},[t("div",mt,l(n.query),1),t("div",xt,[t("span",null,[e[13]||(e[13]=t("i",{class:"fas fa-clock mr-1"},null,-1)),y(l(T(n.timestamp)),1)]),t("span",null,[e[14]||(e[14]=t("i",{class:"fas fa-table mr-1"},null,-1)),y(l(n.rowCount)+" rows",1)]),t("span",null,[e[15]||(e[15]=t("i",{class:"fas fa-bolt mr-1"},null,-1)),y(l(n.executionTime)+"ms",1)])])],8,bt))),128))])):(d(),i("div",gt,[...e[16]||(e[16]=[t("i",{class:"fas fa-history text-2xl mb-3 block"},null,-1),t("p",{class:"text-sm"},"No recent queries",-1)])]))])])}}});export{yt as default};
