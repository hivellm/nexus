import{d as V,c as b,a as i,b as t,e as L,t as n,n as x,o as c,u as R,r as F,f as j,g as z,h as f,i as _,j as U,w,k as E,F as G,l as K,m as q}from"./index-CtlbldqF.js";import{u as A}from"./query-NcVKLskm.js";const H={class:"card"},J={class:"flex items-center justify-between"},O={class:"text-sm text-text-secondary mb-1"},P={class:"text-2xl font-semibold text-text-primary"},W={key:0,class:"flex items-center gap-1 mt-1 text-xs"},p=V({__name:"StatsCard",props:{title:{},value:{},icon:{},color:{},change:{}},setup(d){const l=d,y=b(()=>l.value>=1e6?(l.value/1e6).toFixed(1)+"M":l.value>=1e3?(l.value/1e3).toFixed(1)+"K":l.value.toLocaleString()),h=b(()=>l.change===void 0?"":l.change>=0?"fa-arrow-up":"fa-arrow-down"),u=b(()=>l.change===void 0?"":l.change>=0?"text-success":"text-error");return(r,g)=>(c(),i("div",H,[t("div",J,[t("div",null,[t("div",O,n(d.title),1),t("div",P,n(y.value),1),d.change!==void 0?(c(),i("div",W,[t("i",{class:x(["fas",h.value,u.value])},null,2),t("span",{class:x(u.value)},n(Math.abs(d.change))+"%",3),g[0]||(g[0]=t("span",{class:"text-text-muted"},"vs last period",-1))])):L("",!0)]),t("div",{class:x(["w-12 h-12 rounded-lg flex items-center justify-center bg-bg-tertiary",d.color])},[t("i",{class:x([d.icon,"text-xl"])},null,2)],2)])]))}}),X={class:"p-6 space-y-6"},Y={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4"},Z={class:"card"},tt={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-4"},et={class:"bg-bg-tertiary rounded-lg p-4"},st={class:"flex items-center gap-2"},ot={class:"text-lg font-semibold capitalize"},at={class:"bg-bg-tertiary rounded-lg p-4"},lt={class:"text-lg font-semibold"},nt={class:"w-full bg-bg-hover rounded-full h-2 mt-2"},rt={class:"bg-bg-tertiary rounded-lg p-4"},it={class:"text-lg font-semibold"},ct={key:1,class:"text-text-muted text-center py-8"},ut={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},dt={class:"card"},ft={class:"space-y-2"},gt={class:"card"},mt={key:0,class:"space-y-2"},vt=["onClick"],xt={class:"font-mono text-sm text-text-primary truncate"},ht={class:"flex items-center gap-3 mt-1 text-xs text-text-muted"},pt={key:1,class:"text-text-muted text-center py-4"},wt=V({__name:"DashboardView",setup(d){const l=q(),y=R(),h=A(),u=F(null),r=F(null);let g=null;const k=b(()=>h.recentQueries);async function C(){const s=y.activeClient;if(s)try{const[e,o]=await Promise.all([s.getStats(),s.healthCheck()]);e.success&&e.data&&(u.value=e.data),o.success&&o.data&&(r.value=o.data)}catch(e){console.error("Failed to load dashboard data:",e)}}function N(s){h.setQuery(s),l.push("/query")}function $(s){if(s===0)return"0 B";const e=1024,o=["B","KB","MB","GB","TB"],a=Math.floor(Math.log(s)/Math.log(e));return parseFloat((s/Math.pow(e,a)).toFixed(2))+" "+o[a]}function T(s){const e=Math.floor(s/86400),o=Math.floor(s%86400/3600),a=Math.floor(s%3600/60);return e>0?`${e}d ${o}h`:o>0?`${o}h ${a}m`:`${a}m`}function I(s){const o=new Date().getTime()-new Date(s).getTime(),a=Math.floor(o/6e4),v=Math.floor(o/36e5);return a<1?"Just now":a<60?`${a}m ago`:v<24?`${v}h ago`:new Date(s).toLocaleDateString()}return j(()=>{C(),g=setInterval(C,3e4)}),z(()=>{g&&clearInterval(g)}),(s,e)=>{var a,v,M,S,B,Q,D;const o=E("router-link");return c(),i("div",X,[t("div",Y,[f(p,{title:"Nodes",value:((a=u.value)==null?void 0:a.nodeCount)||0,icon:"fas fa-circle",color:"text-info"},null,8,["value"]),f(p,{title:"Relationships",value:((v=u.value)==null?void 0:v.relationshipCount)||0,icon:"fas fa-arrow-right",color:"text-success"},null,8,["value"]),f(p,{title:"Labels",value:((M=u.value)==null?void 0:M.labelCount)||0,icon:"fas fa-tag",color:"text-warning"},null,8,["value"]),f(p,{title:"Indexes",value:((S=u.value)==null?void 0:S.indexCount)||0,icon:"fas fa-list-ol",color:"text-accent"},null,8,["value"])]),t("div",Z,[e[4]||(e[4]=t("h3",{class:"text-lg font-semibold mb-4 flex items-center gap-2"},[t("i",{class:"fas fa-heartbeat text-error"}),_(" Server Health ")],-1)),r.value?(c(),i("div",tt,[t("div",et,[e[0]||(e[0]=t("div",{class:"text-sm text-text-secondary mb-1"},"Status",-1)),t("div",st,[t("span",{class:x(["w-3 h-3 rounded-full",r.value.status==="healthy"?"bg-success":"bg-error"])},null,2),t("span",ot,n(r.value.status),1)])]),t("div",at,[e[1]||(e[1]=t("div",{class:"text-sm text-text-secondary mb-1"},"Memory Usage",-1)),t("div",lt,n($(((B=r.value.memory)==null?void 0:B.used)||0))+" / "+n($(((Q=r.value.memory)==null?void 0:Q.total)||0)),1),t("div",nt,[t("div",{class:"bg-info h-2 rounded-full transition-all",style:U({width:`${((D=r.value.memory)==null?void 0:D.percentage)||0}%`})},null,4)])]),t("div",rt,[e[2]||(e[2]=t("div",{class:"text-sm text-text-secondary mb-1"},"Uptime",-1)),t("div",it,n(T(r.value.uptime||0)),1)])])):(c(),i("div",ct,[...e[3]||(e[3]=[t("i",{class:"fas fa-spinner fa-spin text-2xl mb-2"},null,-1),t("p",null,"Loading server health...",-1)])]))]),t("div",ut,[t("div",dt,[e[8]||(e[8]=t("h3",{class:"text-lg font-semibold mb-4 flex items-center gap-2"},[t("i",{class:"fas fa-bolt text-warning"}),_(" Quick Actions ")],-1)),t("div",ft,[f(o,{to:"/query",class:"flex items-center gap-3 p-3 bg-bg-tertiary rounded-lg hover:bg-bg-hover transition-colors"},{default:w(()=>[...e[5]||(e[5]=[t("i",{class:"fas fa-terminal text-accent"},null,-1),t("span",null,"Open Query Editor",-1)])]),_:1}),f(o,{to:"/graph",class:"flex items-center gap-3 p-3 bg-bg-tertiary rounded-lg hover:bg-bg-hover transition-colors"},{default:w(()=>[...e[6]||(e[6]=[t("i",{class:"fas fa-project-diagram text-success"},null,-1),t("span",null,"Explore Graph",-1)])]),_:1}),f(o,{to:"/schema",class:"flex items-center gap-3 p-3 bg-bg-tertiary rounded-lg hover:bg-bg-hover transition-colors"},{default:w(()=>[...e[7]||(e[7]=[t("i",{class:"fas fa-sitemap text-info"},null,-1),t("span",null,"View Schema",-1)])]),_:1})])]),t("div",gt,[e[10]||(e[10]=t("h3",{class:"text-lg font-semibold mb-4 flex items-center gap-2"},[t("i",{class:"fas fa-history text-info"}),_(" Recent Queries ")],-1)),k.value.length>0?(c(),i("div",mt,[(c(!0),i(G,null,K(k.value.slice(0,5),m=>(c(),i("div",{key:m.id,class:"p-3 bg-bg-tertiary rounded-lg cursor-pointer hover:bg-bg-hover transition-colors",onClick:bt=>N(m.query)},[t("div",xt,n(m.query),1),t("div",ht,[t("span",null,n(I(m.timestamp)),1),t("span",null,n(m.rowCount)+" rows",1),t("span",null,n(m.executionTime)+"ms",1)])],8,vt))),128))])):(c(),i("div",pt,[...e[9]||(e[9]=[t("i",{class:"fas fa-inbox text-2xl mb-2"},null,-1),t("p",null,"No recent queries",-1)])]))])])])}}});export{wt as default};
