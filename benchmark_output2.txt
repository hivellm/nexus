========================================
Nexus vs Neo4j Performance Benchmark
========================================

[Setup] Creating test data...
  Creating 1000 Person nodes...
  Creating 100 Company nodes...
  Creating 500 WORKS_AT relationships...
  Test data created successfully!

========================================
Category 1: Simple Queries
========================================

[Benchmark] Count All Nodes
  Query: MATCH (n) RETURN count(n) AS total
  Iterations: 20
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  0.52ms avg (20/20 success)
    Neo4j: 1.52ms avg (20/20 success)
    Winner: Nexus (65.6% faster)

[Benchmark] Get Single Node
  Query: MATCH (n:Person {name: 'Person100'}) RETURN n
  Iterations: 20
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  3.72ms avg (20/20 success)
    Neo4j: 1.48ms avg (20/20 success)
    Winner: Neo4j (60.2% faster)

[Benchmark] Get All Nodes
  Query: MATCH (n:Person) RETURN n LIMIT 100
  Iterations: 10
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  6.6ms avg (10/10 success)
    Neo4j: 4.26ms avg (10/10 success)
    Winner: Neo4j (35.4% faster)

========================================
Category 2: Filtering and WHERE Clauses
========================================

[Benchmark] WHERE Age Filter
  Query: MATCH (n:Person) WHERE n.age > 30 RETURN n.name, n.age LIMIT 50
  Iterations: 15
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  5.89ms avg (15/15 success)
    Neo4j: 2ms avg (15/15 success)
    Winner: Neo4j (66.1% faster)

[Benchmark] WHERE City Filter
  Query: MATCH (n:Person) WHERE n.city = 'New York' RETURN n.name LIMIT 50
  Iterations: 15
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  3.85ms avg (15/15 success)
    Neo4j: 1.84ms avg (15/15 success)
    Winner: Neo4j (52.3% faster)

[Benchmark] Complex WHERE
  Query: MATCH (n:Person) WHERE n.age > 25 AND n.age < 50 AND n.city IN ['New York', 'London'] RETURN n.name LIMIT 50
  Iterations: 10
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  4.32ms avg (10/10 success)
    Neo4j: 1.86ms avg (10/10 success)
    Winner: Neo4j (56.9% faster)

========================================
Category 3: Aggregations
========================================

[Benchmark] COUNT Aggregation
  Query: MATCH (n:Person) RETURN count(n) AS total
  Iterations: 20
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  5.79ms avg (20/20 success)
    Neo4j: 1.27ms avg (20/20 success)
    Winner: Neo4j (78.1% faster)

[Benchmark] AVG Aggregation
  Query: MATCH (n:Person) RETURN avg(n.age) AS avg_age
  Iterations: 15
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  4.93ms avg (15/15 success)
    Neo4j: 1.75ms avg (15/15 success)
    Winner: Neo4j (64.5% faster)

[Benchmark] GROUP BY Aggregation
  Query: MATCH (n:Person) RETURN n.city, count(n) AS count ORDER BY count DESC LIMIT 10
  Iterations: 10
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  6.38ms avg (10/10 success)
    Neo4j: 1.75ms avg (10/10 success)
    Winner: Neo4j (72.5% faster)

[Benchmark] COLLECT Aggregation
  Query: MATCH (n:Person) RETURN collect(n.name) AS names LIMIT 1
  Iterations: 15
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  4.03ms avg (15/15 success)
    Neo4j: 2.23ms avg (15/15 success)
    Winner: Neo4j (44.6% faster)

========================================
Category 4: Relationship Traversal
========================================

[Benchmark] Single Hop Relationship
  Query: MATCH (p:Person)-[:WORKS_AT]->(c:Company) RETURN p.name, c.name LIMIT 50
  Iterations: 15
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  9.45ms avg (15/15 success)
    Neo4j: 2.49ms avg (15/15 success)
    Winner: Neo4j (73.6% faster)

[Benchmark] Relationship with WHERE
  Query: MATCH (p:Person)-[r:WORKS_AT]->(c:Company) WHERE r.since > 2020 RETURN p.name, c.name LIMIT 50
  Iterations: 10
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  9.13ms avg (10/10 success)
    Neo4j: 3.27ms avg (10/10 success)
    Winner: Neo4j (64.2% faster)

[Benchmark] Count Relationships
  Query: MATCH ()-[r:WORKS_AT]->() RETURN count(r) AS total
  Iterations: 20
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  3.35ms avg (20/20 success)
    Neo4j: 1.45ms avg (20/20 success)
    Winner: Neo4j (56.7% faster)

========================================
Category 5: Complex Queries
========================================

[Benchmark] Multi-Label Match
  Query: MATCH (p:Person), (c:Company) WHERE p.city = 'New York' RETURN count(p) AS persons, count(c) AS companies
  Iterations: 10
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  7.69ms avg (10/10 success)
    Neo4j: 2.48ms avg (10/10 success)
    Winner: Neo4j (67.7% faster)

[Benchmark] JOIN-like Query
  Query: MATCH (p:Person)-[:WORKS_AT]->(c:Company) WHERE p.age > 30 RETURN p.name, c.name, c.industry LIMIT 50
  Iterations: 10
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  9.42ms avg (10/10 success)
    Neo4j: 2.01ms avg (10/10 success)
    Winner: Neo4j (78.7% faster)

[Benchmark] Nested Aggregation
  Query: MATCH (p:Person)-[:WORKS_AT]->(c:Company) RETURN c.name, count(p) AS employees, avg(p.age) AS avg_age ORDER BY employees DESC LIMIT 10
  Iterations: 8
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  11.88ms avg (8/8 success)
    Neo4j: 2.47ms avg (8/8 success)
    Winner: Neo4j (79.2% faster)

========================================
Category 6: Write Operations
========================================

[Benchmark] CREATE Single Node
  Query: CREATE (n:TestNode {id: 9999, value: 'test'})
  Iterations: 20
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  15.34ms avg (20/20 success)
    Neo4j: 2ms avg (20/20 success)
    Winner: Neo4j (87% faster)

[Benchmark] CREATE with Properties
  Query: CREATE (n:TestNode {id: 9998, name: 'Test', age: 30, active: true})
  Iterations: 15
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  15.97ms avg (15/15 success)
    Neo4j: 2.44ms avg (15/15 success)
    Winner: Neo4j (84.7% faster)

[Benchmark] CREATE Relationship
  Query: MATCH (p:Person {name: 'Person1'}), (c:Company {name: 'Company1'}) CREATE (p)-[:TEST_REL {created: 2024}]->(c)
  Iterations: 15
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  60.46ms avg (15/15 success)
    Neo4j: 4.91ms avg (15/15 success)
    Winner: Neo4j (91.9% faster)

========================================
Category 7: Sorting and Ordering
========================================

[Benchmark] ORDER BY Single Column
  Query: MATCH (n:Person) RETURN n.name ORDER BY n.name LIMIT 100
  Iterations: 10
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  6.5ms avg (10/10 success)
    Neo4j: 3.98ms avg (10/10 success)
    Winner: Neo4j (38.8% faster)

[Benchmark] ORDER BY Multiple Columns
  Query: MATCH (n:Person) RETURN n.city, n.age ORDER BY n.city, n.age DESC LIMIT 100
  Iterations: 10
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  6.6ms avg (10/10 success)
    Neo4j: 2.86ms avg (10/10 success)
    Winner: Neo4j (56.6% faster)

========================================
Category 8: Throughput Test
========================================

[Throughput] Running 100 sequential queries...
  Nexus:  126.39 queries/sec
  Neo4j:  609.98 queries/sec

========================================
SUMMARY REPORT
========================================
Measure-Object : A propriedade "NexusAvgTime" não pode ser encontrada na entrada de nenhum objeto.
No F:\Node\hivellm\nexus\scripts\benchmark-nexus-vs-neo4j.ps1:423 caractere:67
+ ... nexusResults | Measure-Object -Property NexusAvgTime -Average).Averag ...
+                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidArgument: (:) [Measure-Object], PSArgumentException
    + FullyQualifiedErrorId : GenericMeasurePropertyNotFound,Microsoft.PowerShell.Commands.MeasureObjectCommand
Measure-Object : A propriedade "Neo4jAvgTime" não pode ser encontrada na entrada de nenhum objeto.
No F:\Node\hivellm\nexus\scripts\benchmark-nexus-vs-neo4j.ps1:424 caractere:67
+ ... neo4jResults | Measure-Object -Property Neo4jAvgTime -Average).Averag ...
+                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidArgument: (:) [Measure-Object], PSArgumentException
    + FullyQualifiedErrorId : GenericMeasurePropertyNotFound,Microsoft.PowerShell.Commands.MeasureObjectCommand

Overall Statistics:
  Total Benchmarks: 22
  Nexus Wins: 10
  Neo4j Wins: 21
  Ties: 0
  Average Latency - Nexus: 0ms
  Average Latency - Neo4j: 0ms

Category Breakdown:
  : Nexus 10 - Neo4j 21

Top 5 Nexus Performance Wins:
  Count All Nodes: 65.6% faster

Top 5 Neo4j Performance Wins:
  Nested Aggregation: 79.2% faster
  CREATE Single Node: 87% faster
  JOIN-like Query: 78.7% faster
  Count Relationships: 56.7% faster
  Multi-Label Match: 67.7% faster

Detailed results saved to: scripts/benchmark-results-2025-11-19_23-48-47.json

Benchmark completed!
