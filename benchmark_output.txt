========================================
Nexus vs Neo4j Performance Benchmark
========================================

[Setup] Creating test data...
  Creating 1000 Person nodes...
  Creating 100 Company nodes...
  Creating 500 WORKS_AT relationships...
  Test data created successfully!

========================================
Category 1: Simple Queries
========================================

[Benchmark] Count All Nodes
  Query: MATCH (n) RETURN count(n) AS total
  Iterations: 20
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  0.5ms avg (20/20 success)
    Neo4j: 1.33ms avg (20/20 success)
    Winner: Nexus (62.2% faster)

[Benchmark] Get Single Node
  Query: MATCH (n:Person {name: 'Person100'}) RETURN n
  Iterations: 20
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  3.23ms avg (20/20 success)
    Neo4j: 1.63ms avg (20/20 success)
    Winner: Neo4j (49.3% faster)

[Benchmark] Get All Nodes
  Query: MATCH (n:Person) RETURN n LIMIT 100
  Iterations: 10
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  6.62ms avg (10/10 success)
    Neo4j: 4.46ms avg (10/10 success)
    Winner: Neo4j (32.6% faster)

========================================
Category 2: Filtering and WHERE Clauses
========================================

[Benchmark] WHERE Age Filter
  Query: MATCH (n:Person) WHERE n.age > 30 RETURN n.name, n.age LIMIT 50
  Iterations: 15
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  4.37ms avg (15/15 success)
    Neo4j: 1.85ms avg (15/15 success)
    Winner: Neo4j (57.7% faster)

[Benchmark] WHERE City Filter
  Query: MATCH (n:Person) WHERE n.city = 'New York' RETURN n.name LIMIT 50
  Iterations: 15
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  4.72ms avg (15/15 success)
    Neo4j: 1.78ms avg (15/15 success)
    Winner: Neo4j (62.2% faster)

[Benchmark] Complex WHERE
  Query: MATCH (n:Person) WHERE n.age > 25 AND n.age < 50 AND n.city IN ['New York', 'London'] RETURN n.name LIMIT 50
  Iterations: 10
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  7.45ms avg (10/10 success)
    Neo4j: 1.92ms avg (10/10 success)
    Winner: Neo4j (74.2% faster)

========================================
Category 3: Aggregations
========================================

[Benchmark] COUNT Aggregation
  Query: MATCH (n:Person) RETURN count(n) AS total
  Iterations: 20
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  7.78ms avg (20/20 success)
    Neo4j: 1.41ms avg (20/20 success)
    Winner: Neo4j (81.9% faster)

[Benchmark] AVG Aggregation
  Query: MATCH (n:Person) RETURN avg(n.age) AS avg_age
  Iterations: 15
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  6.44ms avg (15/15 success)
    Neo4j: 2.14ms avg (15/15 success)
    Winner: Neo4j (66.7% faster)

[Benchmark] GROUP BY Aggregation
  Query: MATCH (n:Person) RETURN n.city, count(n) AS count ORDER BY count DESC LIMIT 10
  Iterations: 10
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  11.63ms avg (10/10 success)
    Neo4j: 2.01ms avg (10/10 success)
    Winner: Neo4j (82.7% faster)

[Benchmark] COLLECT Aggregation
  Query: MATCH (n:Person) RETURN collect(n.name) AS names LIMIT 1
  Iterations: 15
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  8.88ms avg (15/15 success)
    Neo4j: 3.06ms avg (15/15 success)
    Winner: Neo4j (65.5% faster)

========================================
Category 4: Relationship Traversal
========================================

[Benchmark] Single Hop Relationship
  Query: MATCH (p:Person)-[:WORKS_AT]->(c:Company) RETURN p.name, c.name LIMIT 50
  Iterations: 15
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  9.5ms avg (15/15 success)
    Neo4j: 2ms avg (15/15 success)
    Winner: Neo4j (78.9% faster)

[Benchmark] Relationship with WHERE
  Query: MATCH (p:Person)-[r:WORKS_AT]->(c:Company) WHERE r.since > 2020 RETURN p.name, c.name LIMIT 50
  Iterations: 10
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  9ms avg (10/10 success)
    Neo4j: 2.55ms avg (10/10 success)
    Winner: Neo4j (71.7% faster)

[Benchmark] Count Relationships
  Query: MATCH ()-[r:WORKS_AT]->() RETURN count(r) AS total
  Iterations: 20
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  6.75ms avg (20/20 success)
    Neo4j: 1.71ms avg (20/20 success)
    Winner: Neo4j (74.7% faster)

========================================
Category 5: Complex Queries
========================================

[Benchmark] Multi-Label Match
  Query: MATCH (p:Person), (c:Company) WHERE p.city = 'New York' RETURN count(p) AS persons, count(c) AS companies
  Iterations: 10
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  11.05ms avg (10/10 success)
    Neo4j: 4.32ms avg (10/10 success)
    Winner: Neo4j (60.9% faster)

[Benchmark] JOIN-like Query
  Query: MATCH (p:Person)-[:WORKS_AT]->(c:Company) WHERE p.age > 30 RETURN p.name, c.name, c.industry LIMIT 50
  Iterations: 10
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  11.64ms avg (10/10 success)
    Neo4j: 2.03ms avg (10/10 success)
    Winner: Neo4j (82.5% faster)

[Benchmark] Nested Aggregation
  Query: MATCH (p:Person)-[:WORKS_AT]->(c:Company) RETURN c.name, count(p) AS employees, avg(p.age) AS avg_age ORDER BY employees DESC LIMIT 10
  Iterations: 8
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  12.7ms avg (8/8 success)
    Neo4j: 2.96ms avg (8/8 success)
    Winner: Neo4j (76.7% faster)

========================================
Category 6: Write Operations
========================================

[Benchmark] CREATE Single Node
  Query: CREATE (n:TestNode {id: 9999, value: 'test'})
  Iterations: 20
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  24.47ms avg (20/20 success)
    Neo4j: 2.87ms avg (20/20 success)
    Winner: Neo4j (88.3% faster)

[Benchmark] CREATE with Properties
  Query: CREATE (n:TestNode {id: 9998, name: 'Test', age: 30, active: true})
  Iterations: 15
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  25.05ms avg (15/15 success)
    Neo4j: 3.12ms avg (15/15 success)
    Winner: Neo4j (87.6% faster)

[Benchmark] CREATE Relationship
  Query: MATCH (p:Person {name: 'Person1'}), (c:Company {name: 'Company1'}) CREATE (p)-[:TEST_REL {created: 2024}]->(c)
  Iterations: 15
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  72.24ms avg (15/15 success)
    Neo4j: 3.77ms avg (15/15 success)
    Winner: Neo4j (94.8% faster)

========================================
Category 7: Sorting and Ordering
========================================

[Benchmark] ORDER BY Single Column
  Query: MATCH (n:Person) RETURN n.name ORDER BY n.name LIMIT 100
  Iterations: 10
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  6.1ms avg (10/10 success)
    Neo4j: 2.81ms avg (10/10 success)
    Winner: Neo4j (54% faster)

[Benchmark] ORDER BY Multiple Columns
  Query: MATCH (n:Person) RETURN n.city, n.age ORDER BY n.city, n.age DESC LIMIT 100
  Iterations: 10
  Warming up...
  Running Nexus benchmark...
  Running Neo4j benchmark...
  Results:
    Nexus:  8.13ms avg (10/10 success)
    Neo4j: 3.75ms avg (10/10 success)
    Winner: Neo4j (53.9% faster)

========================================
Category 8: Throughput Test
========================================

[Throughput] Running 100 sequential queries...
  Nexus:  146.9 queries/sec
  Neo4j:  567.47 queries/sec

========================================
SUMMARY REPORT
========================================
Measure-Object : A propriedade "NexusAvgTime" não pode ser encontrada na entrada de nenhum objeto.
No F:\Node\hivellm\nexus\scripts\benchmark-nexus-vs-neo4j.ps1:423 caractere:67
+ ... nexusResults | Measure-Object -Property NexusAvgTime -Average).Averag ...
+                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidArgument: (:) [Measure-Object], PSArgumentException
    + FullyQualifiedErrorId : GenericMeasurePropertyNotFound,Microsoft.PowerShell.Commands.MeasureObjectCommand
Measure-Object : A propriedade "Neo4jAvgTime" não pode ser encontrada na entrada de nenhum objeto.
No F:\Node\hivellm\nexus\scripts\benchmark-nexus-vs-neo4j.ps1:424 caractere:67
+ ... neo4jResults | Measure-Object -Property Neo4jAvgTime -Average).Averag ...
+                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    + CategoryInfo          : InvalidArgument: (:) [Measure-Object], PSArgumentException
    + FullyQualifiedErrorId : GenericMeasurePropertyNotFound,Microsoft.PowerShell.Commands.MeasureObjectCommand

Overall Statistics:
  Total Benchmarks: 22
  Nexus Wins: 10
  Neo4j Wins: 21
  Ties: 0
  Average Latency - Nexus: 0ms
  Average Latency - Neo4j: 0ms

Category Breakdown:
  : Nexus 10 - Neo4j 21

Top 5 Nexus Performance Wins:
  Count All Nodes: 62.2% faster

Top 5 Neo4j Performance Wins:
  Nested Aggregation: 76.7% faster
  CREATE Single Node: 88.3% faster
  JOIN-like Query: 82.5% faster
  Count Relationships: 74.7% faster
  Multi-Label Match: 60.9% faster

Detailed results saved to: scripts/benchmark-results-2025-11-19_23-40-14.json

Benchmark completed!
